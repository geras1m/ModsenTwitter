import{w as D,x as f,y as x,z as g,A as u,C as i,D as I,E as p,G as l,H as U,I as G,J as T,K as v,L as y,M as B,Q as h,U as C,V as k,W as L,X as P,Y as A,Z as F,_ as E,$ as N}from"./index-DUdeovaR.js";const z="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3c/svg%3e",H="/assets/twitter-icon-BAkyI695.svg",O="/assets/baner-twitter-Cxh6muy0.jpg",Q={async LogIn(e,a){const t=await D(l,e,a),{user:s}=t;return s},async LogOut(){await f(l)},async SignUpWithGoogle(){const{user:e}=await x(l,E);return await g(u(i,"users",`${e.uid}`),{uis:e.uid,born:null,isGoogleAuth:!0,surname:null,gender:null,telegramLink:null,email:e.email?e.email:null,name:e.displayName?e.displayName:null,phone:e.phoneNumber?e.phoneNumber:null}),e},async SignUpWithForm(e){const{email:a,name:t,phone:s,password:n,monthBirth:r,dayBirth:o,yearBirth:c}=e,{user:d}=await I(l,a,n);return await g(u(i,"users",`${d.uid}`),{uis:d.uid,born:new Date(c,r,o),isGoogleAuth:!1,surname:null,gender:null,telegramLink:null,email:a,name:t,phone:s}),d},async ChangeUserData(e){const{id:a,name:t,gender:s,surname:n,email:r,telegramLink:o,newPassword:c,currentPassword:d}=e,b=u(i,"users",`${a}`),w=await this.GetDataItemFromDB(a,"users");w&&await p(b,{name:t||w.name,surname:n||w.surname,gender:s||w.gender,telegramLink:o||w.telegramLink});const m=l.currentUser;if(m&&c&&d){const S=U.credential(r,d);await G(m,S),await T(m,c),await f(l),await D(l,r,c)}},async GetDataItemFromDB(e,a){const t=u(i,a,`${e}`),s=await v(t);return s.exists()?s.data():null},async CreateNewTweetInDB(e){const{id:a,authorId:t,authorName:s,authorTag:n,text:r,imgLink:o,date:c}=e;await g(u(i,"tweets",`${a}`),{uis:a,authorId:t,authorName:s,authorTag:n,date:c,text:r,imgLink:o,likes:[]})},async UpdateUserDataInTweets(e,a,t){const s=y(h(i,"tweets"),B("authorId","==",e));(await C(s)).forEach(r=>{p(r.ref,{authorTag:t,authorName:a})})},async AddImageToStorage(e,a){const t=k(N,`images/${e}`);return await L(t,a),await P(t)},async RemoveTweet(e){await A(u(i,"tweets",e))},async ChangeTweetLike(e,a){const t=u(i,"tweets",a.toString()),s=await v(t),n=s.exists()?s.data().likes:null,r=n.indexOf(e)!==-1?n.filter(o=>o!==e):[...n,e];await p(t,{likes:r})},async SubscriptionOnTweetUpdateForSearchPage(e,a){const t=u(i,"tweets",e);return F(t,n=>{a(n.data())})},async SubscribeOnTweetsUpdate(e,a,t){let s;return a==="home"?s=y(h(i,"tweets")):s=y(h(i,"tweets"),B("authorId","==",e)),F(s,r=>{const o=[];r.docs.forEach(c=>{o.push(c.data())}),t(o.reverse())})},async GetQuerySnapshotFromDB(e){return C(h(i,e))},async GetUserDataCollectionFromDB(){const e=await this.GetQuerySnapshotFromDB("users"),a=[];return e.forEach(t=>{a.push(t.data())}),a},async GetTweetDataCollectionFromDB(){const e=await this.GetQuerySnapshotFromDB("tweets"),a=[];return e.forEach(t=>{a.push(t.data())}),a}};var R=(e=>(e.success="success",e.error="error",e))(R||{}),W=(e=>(e.emailAlreadyInUse="auth/email-already-in-use",e.invalidPassword="auth/invalid-credential",e))(W||{}),$=(e=>(e.userExist="The user with this email already exists",e.invalidPassword="Invalid password or email",e.unexpectedError="Unexpected error",e))($||{});export{O as B,$ as E,Q as F,z as G,H as T,R as a,W as b};
